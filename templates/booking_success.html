<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Booking Status â€” JAGADHA ğŸ’— A to Z</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4 bg-light">

<div class="container" style="max-width:760px;">
  <div class="card shadow-sm p-4">

{% if booking %}

<!-- ================= HEADER ================= -->
<h3 class="mb-2 text-success">ğŸ‰ Booking Submitted Successfully</h3>

<!-- ================= STATUS BADGE ================= -->
<div class="mb-3">
  {% if booking.status == 'Confirmed' %}
    <span class="badge bg-success fs-6 px-3 py-2">âœ… Booking Confirmed</span>
  {% elif booking.status == 'Rejected' %}
    <span class="badge bg-danger fs-6 px-3 py-2">âŒ Booking Rejected</span>
  {% else %}
    <span class="badge bg-warning text-dark fs-6 px-3 py-2">â³ Booking Under Review</span>
  {% endif %}
</div>

<p class="mb-3">
  Thank you <strong>{{ booking.name }}</strong>,<br>
  Your booking ID is <strong>#{{ booking.id }}</strong>.
</p>

<!-- ================= STATUS MESSAGE ================= -->
{% if booking.status == 'Pending' %}
<div class="alert alert-warning small">
  â³ Your booking has been received and is currently under admin review.<br>
  You will receive a confirmation email and WhatsApp message once approved.
</div>
{% elif booking.status == 'Confirmed' %}
<div class="alert alert-success small">
  âœ… Your booking is confirmed.<br>
  A confirmation email and WhatsApp message have been sent.
</div>
{% elif booking.status == 'Rejected' %}
<div class="alert alert-danger small">
  âŒ Unfortunately, your booking was not approved.<br>
  Please contact us for further assistance.
</div>
{% endif %}

<!-- ================= BOOKING DETAILS ================= -->
<ul class="list-group list-group-flush mb-4">
  <li class="list-group-item">
    <b>ğŸ•’ Received:</b>
    {{ booking.created_at.strftime("%d-%m-%Y %I:%M %p") if booking.created_at else "-" }}
  </li>
  <li class="list-group-item">
    <b>ğŸ“… Event Date:</b>
    {{ booking.event_date.strftime("%d-%m-%Y") if booking.event_date else "-" }}
  </li>
  <li class="list-group-item"><b>ğŸˆ Service:</b> {{ booking.service or "-" }}</li>
  <li class="list-group-item"><b>âœ¨ Extras:</b> {{ booking.extras or "-" }}</li>
  <li class="list-group-item"><b>ğŸ“ Location:</b> {{ booking.location or "-" }}</li>
  <li class="list-group-item"><b>ğŸ“ Phone:</b> {{ booking.phone or "-" }}</li>
  <li class="list-group-item"><b>ğŸ“§ Email:</b> {{ booking.customer_email or "-" }}</li>
</ul>

<!-- ================= ACTION BUTTONS ================= -->
<div class="d-flex flex-wrap gap-2 mb-3">
  <a href="/" class="btn btn-outline-secondary">ğŸ  Back to Home</a>

  {% if booking.status == 'Confirmed' and wa %}
  <a href="{{ wa.customer_link }}" target="_blank" class="btn btn-success">
    ğŸ“² WhatsApp Confirmation
  </a>
  {% endif %}
</div>

<!-- ================= WHATSAPP DETAILS ================= -->
{% if booking.status == 'Confirmed' and wa %}
<hr>

<h5 class="mt-3">ğŸ“± WhatsApp Confirmation</h5>

<div class="alert alert-light border small mb-3">
  Your WhatsApp confirmation message is ready.<br>
  Click the button above to send or review it before sending.
</div>

<div class="d-flex flex-wrap gap-2">
  <a href="{{ wa.customer_link }}" target="_blank" class="btn btn-success">
    ğŸ“² Send to Customer
  </a>
  <a href="{{ wa.admin_link }}" target="_blank" class="btn btn-dark">
    ğŸ‘¤ Send to Admin
  </a>
</div>

{% endif %}
<!-- ================= END WHATSAPP ================= -->

<p class="text-muted mt-4 mb-0 small">
  ğŸ“§ An automated email has been sent to the admin.
  {% if booking.customer_email %}
    You will also receive a copy at <b>{{ booking.customer_email }}</b>.
  {% endif %}
</p>

{% else %}
<p class="text-danger">âŒ Booking details not available.</p>
{% endif %}

  </div>
</div>

</body>
</html>
